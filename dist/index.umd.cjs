(function(Q,X){typeof exports=="object"&&typeof module<"u"?X(exports,require("svelte")):typeof define=="function"&&define.amd?define(["exports","svelte"],X):(Q=typeof globalThis<"u"?globalThis:Q||self,X(Q.UnlayerSvelteSDK={},Q.Svelte))})(this,function(Q,X){"use strict";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add("5");const Ht=1,zt=4,Yt=8,Bt=16,Vt=2,E=Symbol(),et=!1;var tt=Array.isArray,Wt=Array.prototype.indexOf,Oe=Object.defineProperty,ye=Object.getOwnPropertyDescriptor,Kt=Object.prototype,Gt=Array.prototype,Jt=Object.getPrototypeOf;function Zt(e){for(var t=0;t<e.length;t++)e[t]()}function Qt(){var e,t,n=new Promise((r,l)=>{e=r,t=l});return{promise:n,resolve:e,reject:t}}const C=2,Pe=4,Re=8,ce=16,H=32,oe=64,nt=128,P=256,xe=512,T=1024,R=2048,V=4096,W=8192,$=16384,Ie=32768,Ue=65536,rt=1<<17,Xt=1<<18,Ae=1<<19,it=1<<20,Fe=1<<21,je=1<<22,ee=1<<23,de=Symbol("$state"),$t=Symbol("legacy props"),qe=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function en(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function tn(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function nn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function rn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ln(e){throw new Error("https://svelte.dev/e/effect_orphan")}function on(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function sn(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function an(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function un(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function fn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function lt(e){return e===this.v}function cn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function dn(e){return!cn(e,this.v)}let vn=!1,F=null;function Ee(e){F=e}function _n(e,t=!1,n){F={p:F,c:null,e:null,s:e,x:null,l:null}}function hn(e){var t=F,n=t.e;if(n!==null){t.e=null;for(var r of n)bt(r)}return e!==void 0&&(t.x=e),F=t.p,e??{}}function ot(){return!0}const pn=new WeakMap;function gn(e){var t=h;if(t===null)return _.f|=ee,e;if((t.f&Ie)===0){if((t.f&nt)===0)throw!t.parent&&e instanceof Error&&st(e),e;t.b.error(e)}else He(e,t)}function He(e,t){for(;t!==null;){if((t.f&nt)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e instanceof Error&&st(e),e}function st(e){const t=pn.get(e);t&&(Oe(e,"message",{value:t.message}),Oe(e,"stack",{value:t.stack}))}let ke=[];function wn(){var e=ke;ke=[],Zt(e)}function at(e){ke.length===0&&queueMicrotask(wn),ke.push(e)}function mn(){for(var e=h.b;e!==null&&!e.has_pending_snippet();)e=e.parent;return e===null&&en(),e}function ze(e){var t=C|R,n=_!==null&&(_.f&C)!==0?_:null;return h===null||n!==null&&(n.f&P)!==0?t|=P:h.f|=Ae,{ctx:F,deps:null,effects:null,equals:lt,f:t,fn:e,reactions:null,rv:0,v:E,wv:0,parent:n??h,ac:null}}function bn(e,t){let n=h;n===null&&tn();var r=n.b,l=void 0,i=ht(E),s=null,a=!_;return Un(()=>{try{var o=e()}catch(c){o=Promise.reject(c)}var u=()=>o;l=s?.then(u,u)??Promise.resolve(o),s=l;var f=x,d=r.pending;a&&(r.update_pending_count(1),d||f.increment());const v=(c,p=void 0)=>{s=null,d||f.activate(),p?p!==qe&&(i.f|=ee,We(i,p)):((i.f&ee)!==0&&(i.f^=ee),We(i,c)),a&&(r.update_pending_count(-1),d||f.decrement()),ct()};if(l.then(v,c=>v(null,c||"unknown")),f)return()=>{queueMicrotask(()=>f.neuter())}}),new Promise(o=>{function u(f){function d(){f===l?o(i):u(l)}f.then(d,d)}u(l)})}function yn(e){const t=ze(e);return t.equals=dn,t}function ut(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)pe(t[n])}}function xn(e){for(var t=e.parent;t!==null;){if((t.f&C)===0)return t;t=t.parent}return null}function Ye(e){var t,n=h;G(xn(e));try{ut(e),t=Rt(e)}finally{G(n)}return t}function ft(e){var t=Ye(e);if(e.equals(t)||(e.v=t,e.wv=Ot()),!re)if(se!==null)se.set(e,e.v);else{var n=(J||(e.f&P)!==0)&&e.deps!==null?V:T;L(e,n)}}function En(e,t,n){const r=ze;if(t.length===0){n(e.map(r));return}var l=x,i=h,s=kn(),a=mn();Promise.all(t.map(o=>bn(o))).then(o=>{l?.activate(),s();try{n([...e.map(r),...o])}catch(u){(i.f&$)===0&&He(u,i)}l?.deactivate(),ct()}).catch(o=>{a.error(o)})}function kn(){var e=h,t=_,n=F;return function(){G(e),q(t),Ee(n)}}function ct(){G(null),q(null),Ee(null)}const ve=new Set;let x=null,se=null,dt=new Set,Te=[];function vt(){const e=Te.shift();Te.length>0&&queueMicrotask(vt),e()}let _e=[],Be=null,Ve=!1;class he{current=new Map;#i=new Map;#l=new Set;#e=0;#u=null;#f=!1;#n=[];#o=[];#r=[];#t=[];#s=[];#c=[];#d=[];skipped_effects=new Set;process(t){_e=[];var n=null;if(ve.size>1){n=new Map,se=new Map;for(const[i,s]of this.current)n.set(i,{v:i.v,wv:i.wv}),i.v=s;for(const i of ve)if(i!==this)for(const[s,a]of i.#i)n.has(s)||(n.set(s,{v:s.v,wv:s.wv}),s.v=a)}for(const i of t)this.#_(i);if(this.#n.length===0&&this.#e===0){this.#v();var r=this.#r,l=this.#t;this.#r=[],this.#t=[],this.#s=[],x=null,_t(r),_t(l),x===null?x=this:ve.delete(this),this.#u?.resolve()}else this.#a(this.#r),this.#a(this.#t),this.#a(this.#s);if(n){for(const[i,{v:s,wv:a}]of n)i.wv<=a&&(i.v=s);se=null}for(const i of this.#n)we(i);for(const i of this.#o)we(i);this.#n=[],this.#o=[]}#_(t){t.f^=T;for(var n=t.first;n!==null;){var r=n.f,l=(r&(H|oe))!==0,i=l&&(r&T)!==0,s=i||(r&W)!==0||this.skipped_effects.has(n);if(!s&&n.fn!==null){if(l)n.f^=T;else if((r&T)===0)if((r&Pe)!==0)this.#t.push(n);else if((r&je)!==0){var a=n.b?.pending?this.#o:this.#n;a.push(n)}else Me(n)&&((n.f&ce)!==0&&this.#s.push(n),we(n));var o=n.first;if(o!==null){n=o;continue}}var u=n.parent;for(n=n.next;n===null&&u!==null;)n=u.next,u=u.parent}}#a(t){for(const n of t)((n.f&R)!==0?this.#c:this.#d).push(n),L(n,T);t.length=0}capture(t,n){this.#i.has(t)||this.#i.set(t,n),this.current.set(t,t.v)}activate(){x=this}deactivate(){x=null;for(const t of dt)if(dt.delete(t),t(),x!==null)break}neuter(){this.#f=!0}flush(){_e.length>0?Tn():this.#v(),x===this&&(this.#e===0&&ve.delete(this),this.deactivate())}#v(){if(!this.#f)for(const t of this.#l)t();this.#l.clear()}increment(){this.#e+=1}decrement(){if(this.#e-=1,this.#e===0){for(const t of this.#c)L(t,R),te(t);for(const t of this.#d)L(t,V),te(t);this.#r=[],this.#t=[],this.flush()}else this.deactivate()}add_callback(t){this.#l.add(t)}settled(){return(this.#u??=Qt()).promise}static ensure(){if(x===null){const t=x=new he;ve.add(x),he.enqueue(()=>{x===t&&t.flush()})}return x}static enqueue(t){Te.length===0&&queueMicrotask(vt),Te.unshift(t)}}function Tn(){var e=ue;Ve=!0;try{var t=0;for(Dt(!0);_e.length>0;){var n=he.ensure();if(t++>1e3){var r,l;Mn()}n.process(_e),ne.clear()}}finally{Ve=!1,Dt(e),Be=null}}function Mn(){try{on()}catch(e){He(e,Be)}}function _t(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&($|W))===0&&Me(r)){var l=x?x.current.size:0;if(we(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Tt(r):r.fn=null),x!==null&&x.current.size>l&&(r.f&it)!==0)break}}for(;n<t;)te(e[n++])}}function te(e){for(var t=Be=e;t.parent!==null;){t=t.parent;var n=t.f;if(Ve&&t===h&&(n&ce)!==0)return;if((n&(oe|H))!==0){if((n&T)===0)return;t.f^=T}}_e.push(t)}const ne=new Map;function ht(e,t){var n={f:0,v:e,reactions:null,equals:lt,rv:0,wv:0};return n}function A(e,t){const n=ht(e);return Bn(n),n}function D(e,t,n=!1){_!==null&&(!j||(_.f&rt)!==0)&&ot()&&(_.f&(C|ce|je|rt))!==0&&!z?.includes(e)&&fn();let r=n?ae(t):t;return We(e,r)}function We(e,t){if(!e.equals(t)){var n=e.v;re?ne.set(e,t):ne.set(e,n),e.v=t;var r=he.ensure();r.capture(e,n),(e.f&C)!==0&&((e.f&R)!==0&&Ye(e),L(e,(e.f&P)===0?T:V)),e.wv=Ot(),pt(e,R),h!==null&&(h.f&T)!==0&&(h.f&(H|oe))===0&&(I===null?Vn([e]):I.push(e))}return t}function Ke(e){D(e,e.v+1)}function pt(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,l=0;l<r;l++){var i=n[l],s=i.f,a=(s&R)===0;a&&L(i,t),(s&C)!==0?pt(i,V):a&&te(i)}}function ae(e){if(typeof e!="object"||e===null||de in e)return e;const t=Jt(e);if(t!==Kt&&t!==Gt)return e;var n=new Map,r=tt(e),l=A(0),i=ie,s=a=>{if(ie===i)return a();var o=_,u=ie;q(null),Nt(i);var f=a();return q(o),Nt(u),f};return r&&n.set("length",A(e.length)),new Proxy(e,{defineProperty(a,o,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&an();var f=n.get(o);return f===void 0?f=s(()=>{var d=A(u.value);return n.set(o,d),d}):D(f,u.value,!0),!0},deleteProperty(a,o){var u=n.get(o);if(u===void 0){if(o in a){const f=s(()=>A(E));n.set(o,f),Ke(l)}}else D(u,E),Ke(l);return!0},get(a,o,u){if(o===de)return e;var f=n.get(o),d=o in a;if(f===void 0&&(!d||ye(a,o)?.writable)&&(f=s(()=>{var c=ae(d?a[o]:E),p=A(c);return p}),n.set(o,f)),f!==void 0){var v=y(f);return v===E?void 0:v}return Reflect.get(a,o,u)},getOwnPropertyDescriptor(a,o){var u=Reflect.getOwnPropertyDescriptor(a,o);if(u&&"value"in u){var f=n.get(o);f&&(u.value=y(f))}else if(u===void 0){var d=n.get(o),v=d?.v;if(d!==void 0&&v!==E)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return u},has(a,o){if(o===de)return!0;var u=n.get(o),f=u!==void 0&&u.v!==E||Reflect.has(a,o);if(u!==void 0||h!==null&&(!f||ye(a,o)?.writable)){u===void 0&&(u=s(()=>{var v=f?ae(a[o]):E,c=A(v);return c}),n.set(o,u));var d=y(u);if(d===E)return!1}return f},set(a,o,u,f){var d=n.get(o),v=o in a;if(r&&o==="length")for(var c=u;c<d.v;c+=1){var p=n.get(c+"");p!==void 0?D(p,E):c in a&&(p=s(()=>A(E)),n.set(c+"",p))}if(d===void 0)(!v||ye(a,o)?.writable)&&(d=s(()=>A(void 0)),D(d,ae(u)),n.set(o,d));else{v=d.v!==E;var S=s(()=>ae(u));D(d,S)}var k=Reflect.getOwnPropertyDescriptor(a,o);if(k?.set&&k.set.call(f,u),!v){if(r&&typeof o=="string"){var U=n.get("length"),m=Number(o);Number.isInteger(m)&&m>=U.v&&D(U,m+1)}Ke(l)}return!0},ownKeys(a){y(l);var o=Reflect.ownKeys(a).filter(d=>{var v=n.get(d);return v===void 0||v.v!==E});for(var[u,f]of n)f.v!==E&&!(u in a)&&o.push(u);return o},setPrototypeOf(){un()}})}var Sn,Dn,Ln;function gt(e=""){return document.createTextNode(e)}function Ge(e){return Dn.call(e)}function Je(e){return Ln.call(e)}function Ze(e,t){return Ge(e)}function wt(e,t){{var n=Ge(e);return n instanceof Comment&&n.data===""?Je(n):n}}function mt(e,t=1,n=!1){let r=e;for(;t--;)r=Je(r);return r}function Cn(){return!1}function Nn(e){h===null&&_===null&&ln(),_!==null&&(_.f&P)!==0&&h===null&&rn(),re&&nn()}function On(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function K(e,t,n,r=!0){var l=h;l!==null&&(l.f&W)!==0&&(e|=W);var i={ctx:F,deps:null,nodes_start:null,nodes_end:null,f:e|R,first:null,fn:t,last:null,next:null,parent:l,b:l&&l.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{we(i),i.f|=Ie}catch(o){throw pe(i),o}else t!==null&&te(i);var s=n&&i.deps===null&&i.first===null&&i.nodes_start===null&&i.teardown===null&&(i.f&Ae)===0;if(!s&&r&&(l!==null&&On(i,l),_!==null&&(_.f&C)!==0&&(e&oe)===0)){var a=_;(a.effects??=[]).push(i)}return i}function Pn(e){const t=K(Re,null,!1);return L(t,T),t.teardown=e,t}function Rn(e){Nn();var t=h.f,n=!_&&(t&H)!==0&&(t&Ie)===0;if(n){var r=F;(r.e??=[]).push(e)}else return bt(e)}function bt(e){return K(Pe|it,e,!1)}function In(e){return K(Pe,e,!1)}function Un(e){return K(je|Ae,e,!0)}function An(e,t=0){return K(Re|t,e,!0)}function yt(e,t=[],n=[]){En(t,n,r=>{K(Re,()=>e(...r.map(y)),!0)})}function Fn(e,t=0){var n=K(ce|t,e,!0);return n}function xt(e,t=!0){return K(H,e,!0,t)}function Et(e){var t=e.teardown;if(t!==null){const n=re,r=_;Lt(!0),q(null);try{t.call(null)}finally{Lt(n),q(r)}}}function kt(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){n.ac?.abort(qe);var r=n.next;(n.f&oe)!==0?n.parent=null:pe(n,t),n=r}}function jn(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&H)===0&&pe(t),t=n}}function pe(e,t=!0){var n=!1;(t||(e.f&Xt)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(qn(e.nodes_start,e.nodes_end),n=!0),kt(e,t&&!n),Se(e,0),L(e,$);var r=e.transitions;if(r!==null)for(const i of r)i.stop();Et(e);var l=e.parent;l!==null&&l.first!==null&&Tt(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function qn(e,t){for(;e!==null;){var n=e===t?null:Je(e);e.remove(),e=n}}function Tt(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Hn(e,t){var n=[];Mt(e,n,!0),zn(n,()=>{pe(e),t&&t()})}function zn(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var l of e)l.out(r)}else t()}function Mt(e,t,n){if((e.f&W)===0){if(e.f^=W,e.transitions!==null)for(const s of e.transitions)(s.is_global||n)&&t.push(s);for(var r=e.first;r!==null;){var l=r.next,i=(r.f&Ue)!==0||(r.f&H)!==0;Mt(r,t,i?n:!1),r=l}}}function Yn(e){St(e,!0)}function St(e,t){if((e.f&W)!==0){e.f^=W,(e.f&T)===0&&(L(e,R),te(e));for(var n=e.first;n!==null;){var r=n.next,l=(n.f&Ue)!==0||(n.f&H)!==0;St(n,l?t:!1),n=r}if(e.transitions!==null)for(const i of e.transitions)(i.is_global||t)&&i.in()}}let ue=!1;function Dt(e){ue=e}let re=!1;function Lt(e){re=e}let _=null,j=!1;function q(e){_=e}let h=null;function G(e){h=e}let z=null;function Bn(e){_!==null&&(z===null?z=[e]:z.push(e))}let M=null,N=0,I=null;function Vn(e){I=e}let Ct=1,ge=0,ie=ge;function Nt(e){ie=e}let J=!1;function Ot(){return++Ct}function Me(e){var t=e.f;if((t&R)!==0)return!0;if((t&V)!==0){var n=e.deps,r=(t&P)!==0;if(n!==null){var l,i,s=(t&xe)!==0,a=r&&h!==null&&!J,o=n.length;if((s||a)&&(h===null||(h.f&$)===0)){var u=e,f=u.parent;for(l=0;l<o;l++)i=n[l],(s||!i?.reactions?.includes(u))&&(i.reactions??=[]).push(u);s&&(u.f^=xe),a&&f!==null&&(f.f&P)===0&&(u.f^=P)}for(l=0;l<o;l++)if(i=n[l],Me(i)&&ft(i),i.wv>e.wv)return!0}(!r||h!==null&&!J)&&L(e,T)}return!1}function Pt(e,t,n=!0){var r=e.reactions;if(r!==null&&!z?.includes(e))for(var l=0;l<r.length;l++){var i=r[l];(i.f&C)!==0?Pt(i,t,!1):t===i&&(n?L(i,R):(i.f&T)!==0&&L(i,V),te(i))}}function Rt(e){var t=M,n=N,r=I,l=_,i=J,s=z,a=F,o=j,u=ie,f=e.f;M=null,N=0,I=null,J=(f&P)!==0&&(j||!ue||_===null),_=(f&(H|oe))===0?e:null,z=null,Ee(e.ctx),j=!1,ie=++ge,e.ac!==null&&(e.ac.abort(qe),e.ac=null);try{e.f|=Fe;var d=(0,e.fn)(),v=e.deps;if(M!==null){var c;if(Se(e,N),v!==null&&N>0)for(v.length=N+M.length,c=0;c<M.length;c++)v[N+c]=M[c];else e.deps=v=M;if(!J||(f&C)!==0&&e.reactions!==null)for(c=N;c<v.length;c++)(v[c].reactions??=[]).push(e)}else v!==null&&N<v.length&&(Se(e,N),v.length=N);if(ot()&&I!==null&&!j&&v!==null&&(e.f&(C|V|R))===0)for(c=0;c<I.length;c++)Pt(I[c],e);return l!==null&&l!==e&&(ge++,I!==null&&(r===null?r=I:r.push(...I))),(e.f&ee)!==0&&(e.f^=ee),d}catch(p){return gn(p)}finally{e.f^=Fe,M=t,N=n,I=r,_=l,J=i,z=s,Ee(a),j=o,ie=u}}function Wn(e,t){let n=t.reactions;if(n!==null){var r=Wt.call(n,e);if(r!==-1){var l=n.length-1;l===0?n=t.reactions=null:(n[r]=n[l],n.pop())}}n===null&&(t.f&C)!==0&&(M===null||!M.includes(t))&&(L(t,V),(t.f&(P|xe))===0&&(t.f^=xe),ut(t),Se(t,0))}function Se(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Wn(e,n[r])}function we(e){var t=e.f;if((t&$)===0){L(e,T);var n=h,r=ue;h=e,ue=!0;try{(t&ce)!==0?jn(e):kt(e),Et(e);var l=Rt(e);e.teardown=typeof l=="function"?l:null,e.wv=Ct;var i;et&&vn&&(e.f&R)!==0&&e.deps}finally{ue=r,h=n}}}function y(e){var t=e.f,n=(t&C)!==0;if(_!==null&&!j){var r=h!==null&&(h.f&$)!==0;if(!r&&!z?.includes(e)){var l=_.deps;if((_.f&Fe)!==0)e.rv<ge&&(e.rv=ge,M===null&&l!==null&&l[N]===e?N++:M===null?M=[e]:(!J||!M.includes(e))&&M.push(e));else{(_.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[_]:i.includes(_)||i.push(_)}}}else if(n&&e.deps===null&&e.effects===null){var s=e,a=s.parent;a!==null&&(a.f&P)===0&&(s.f^=P)}if(re){if(ne.has(e))return ne.get(e);if(n){s=e;var o=s.v;return((s.f&T)===0&&s.reactions!==null||It(s))&&(o=Ye(s)),ne.set(s,o),o}}else if(n){if(s=e,se?.has(s))return se.get(s);Me(s)&&ft(s)}if((e.f&ee)!==0)throw e.v;return e.v}function It(e){if(e.v===E)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(ne.has(t)||(t.f&C)!==0&&It(t))return!0;return!1}function Ut(e){var t=j;try{return j=!0,e()}finally{j=t}}const Kn=-7169;function L(e,t){e.f=e.f&Kn|t}function Gn(e){var t=_,n=h;q(null),G(null);try{return e()}finally{q(t),G(n)}}function Jn(e,t,n,r={}){function l(i){if(r.capture||Qn.call(t,i),!i.cancelBubble)return Gn(()=>n?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?at(()=>{t.addEventListener(e,l,r)}):t.addEventListener(e,l,r),l}function Zn(e,t,n,r,l){var i={capture:r,passive:l},s=Jn(e,t,n,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Pn(()=>{t.removeEventListener(e,s,i)})}let At=null;function Qn(e){var t=this,n=t.ownerDocument,r=e.type,l=e.composedPath?.()||[],i=l[0]||e.target;At=e;var s=0,a=At===e&&e.__root;if(a){var o=l.indexOf(a);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var u=l.indexOf(t);if(u===-1)return;o<=u&&(s=o)}if(i=l[s]||e.target,i!==t){Oe(e,"currentTarget",{configurable:!0,get(){return i||n}});var f=_,d=h;q(null),G(null);try{for(var v,c=[];i!==null;){var p=i.assignedSlot||i.parentNode||i.host||null;try{var S=i["__"+r];if(S!=null&&(!i.disabled||e.target===i))if(tt(S)){var[k,...U]=S;k.apply(i,[e,...U])}else S.call(i,e)}catch(m){v?c.push(m):v=m}if(e.cancelBubble||p===t||p===null)break;i=p}if(v){for(let m of c)queueMicrotask(()=>{throw m});throw v}}finally{e.__root=t,delete e.currentTarget,q(f),G(d)}}}function Xn(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Ft(e,t){var n=h;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function De(e,t){var n=(t&Vt)!==0,r,l=!e.startsWith("<!>");return()=>{r===void 0&&(r=Xn(l?e:"<!>"+e),r=Ge(r));var i=n||Sn?document.importNode(r,!0):r.cloneNode(!0);return Ft(i,i),i}}function jt(){var e=document.createDocumentFragment(),t=document.createComment(""),n=gt();return e.append(t,n),Ft(t,n),e}function fe(e,t){e!==null&&e.before(t)}function $n(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function Qe(e,t,n=!1){var r=e,l=null,i=null,s=E,a=n?Ue:0,o=!1;const u=(c,p=!0)=>{o=!0,v(p,c)};var f=null;function d(){f!==null&&(f.lastChild.remove(),r.before(f),f=null);var c=s?l:i,p=s?i:l;c&&Yn(c),p&&Hn(p,()=>{s?i=null:l=null})}const v=(c,p)=>{if(s!==(s=c)){var S=Cn(),k=r;if(S&&(f=document.createDocumentFragment(),f.append(k=gt())),s?l??=p&&xt(()=>p(k)):i??=p&&xt(()=>p(k)),S){var U=x,m=s?l:i,Y=s?i:l;m&&U.skipped_effects.delete(m),Y&&U.skipped_effects.add(Y),U.add_callback(d)}else d()}};Fn(()=>{o=!1,t(u),o||v(null,null)},a)}function er(e,t,n){var r=e==null?"":""+e;return r=r?r+" "+t:t,r===""?null:r}function tr(e,t,n,r,l,i){var s=e.__className;if(s!==n||s===void 0){var a=er(n,r);a==null?e.removeAttribute("class"):e.className=a,e.__className=n}return i}function qt(e,t){return e===t||e?.[de]===t}function nr(e={},t,n,r){return In(()=>{var l,i;return An(()=>{l=i,i=[],Ut(()=>{e!==n(...i)&&(t(e,...i),l&&qt(n(...l),e)&&t(null,...l))})}),()=>{at(()=>{i&&qt(n(...i),e)&&t(null,...i)})}}),e}let Le=!1;function rr(e){var t=Le;try{return Le=!1,[e(),Le]}finally{Le=t}}function Xe(e,t,n,r){var l=(n&Yt)!==0,i=(n&Bt)!==0,s=r,a=!0,o=()=>(a&&(a=!1,s=i?Ut(r):r),s),u;if(l){var f=de in e||$t in e;u=ye(e,t)?.set??(f&&t in e?m=>e[t]=m:void 0)}var d,v=!1;l?[d,v]=rr(()=>e[t]):d=e[t],d===void 0&&r!==void 0&&(d=o(),u&&(sn(),u(d)));var c;if(c=()=>{var m=e[t];return m===void 0?o():(a=!0,m)},(n&zt)===0)return c;if(u){var p=e.$$legacy;return function(m,Y){return arguments.length>0?((!Y||p||v)&&u(Y?c():m),m):c()}}var S=!1,k=((n&Ht)!==0?ze:yn)(()=>(S=!1,c()));l&&y(k);var U=h;return function(m,Y){if(arguments.length>0){const me=Y?y(k):l?ae(m):m;return D(k,me),S=!0,s!==void 0&&(s=me),m}return re&&S||(U.f&$)!==0?k.v:y(k)}}var ir=De('<div class="loading-overlay svelte-ik7c9f"><div class="loading-spinner svelte-ik7c9f"></div> <p class="svelte-ik7c9f">Loading Unlayer Editor...</p></div>'),lr=De('<div class="error-overlay svelte-ik7c9f"><div class="error-icon svelte-ik7c9f">⚠️</div> <h3 class="svelte-ik7c9f">Failed to Load Editor</h3> <p class="svelte-ik7c9f"> </p> <button class="retry-btn svelte-ik7c9f">Retry Loading</button></div>'),or=De('<div class="loading-overlay svelte-ik7c9f"><div class="loading-spinner svelte-ik7c9f"></div> <p class="svelte-ik7c9f">Initializing Editor...</p></div>'),sr=De('<div style="width: 100%; height: 100%; min-height: 600px;"><!></div>');function ar(e,t){_n(t,!0);let n=Xe(t,"options",19,()=>({})),r=Xe(t,"autoLoad",3,!0),l=Xe(t,"class",3,"");const i=X.createEventDispatcher();let s,a=null,o=A(!1),u=A(!1),f=A("");const v={...{displayMode:"email",locale:"en-US",customJS:[],customCSS:[],features:{preview:!0,imageEditor:!0,stockImages:!0,textEditor:{spellChecker:!0,thesaurus:!0}}},...n()},c=["https://editor.unlayer.com/embed.js","https://unpkg.com/react-email-editor@latest/dist/index.js","https://cdn.jsdelivr.net/npm/react-email-editor@latest/dist/index.js"];async function p(){return new Promise((w,b)=>{if(window.UnlayerEditor||window.EmailEditor){w();return}let g=0;const O=()=>{if(g>=c.length){console.warn("All CDN sources failed, creating mock editor"),S(),w();return}const B=document.createElement("script");B.src=c[g],B.type="text/javascript",B.onload=()=>{console.log(`Script loaded successfully from: ${c[g]}`),window.UnlayerEditor?(console.log("UnlayerEditor global found"),w()):window.EmailEditor?(console.log("EmailEditor global found"),window.UnlayerEditor=window.EmailEditor,w()):(console.warn("No expected global variable found, trying next source"),g++,O())},B.onerror=()=>{console.warn(`Failed to load from: ${c[g]}`),g++,O()},document.head.appendChild(B)};O()})}function S(){console.log("Creating mock Unlayer editor"),window.UnlayerEditor=class{options;currentDesign;constructor(b){console.log("Mock editor initialized with options:",b),this.options=b,this.currentDesign=t.design||{body:{rows:[]},design:{width:"600px"}}}addEventListener(b,g){console.log(`Mock editor: ${b} event listener added`)}loadDesign(b){console.log("Mock editor: Loading design",b),console.log("Mock editor: Options:",this.options),console.log("Mock editor: Container element:",this.options.id),console.log("Mock editor: Current container HTML before update:",this.options.id?.innerHTML),this.currentDesign=b,setTimeout(()=>{const g=this.options.id;if(console.log("Mock editor: Using container directly:",g),g&&g instanceof HTMLElement){console.log("Mock editor: Setting innerHTML on container");const O=["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57","#ff9ff3"],B=O[Math.floor(Math.random()*O.length)],Z=new Date().toLocaleTimeString(),le=`
              <div style="padding: 20px; text-align: center; background: ${B}; border: 3px solid #333; border-radius: 8px; min-height: 400px; animation: fadeIn 0.5s ease-in;">
                <h3 style="color: white; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); font-size: 24px;">🎨 Mock Unlayer Editor - DESIGN LOADED!</h3>
                <p style="color: white; font-weight: bold; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">This is a mock editor because the CDN failed to load.</p>
                <p style="color: white; font-weight: bold; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">Your design has been loaded and can be exported.</p>
                
                <div style="margin: 20px 0; padding: 15px; background: white; border-radius: 6px; text-align: left; max-width: 100%; overflow-x: auto; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
                  <strong style="color: #333;">Loaded Design:</strong>
                  <pre style="font-size: 12px; overflow-x: auto; white-space: pre-wrap; word-break: break-word; color: #333;">${JSON.stringify(b,null,2)}</pre>
                </div>
                
                <div style="margin: 20px 0; padding: 15px; background: #e3f2fd; border-radius: 6px; border-left: 4px solid #2196f3; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
                  <strong style="color: #1976d2;">📧 Email Preview:</strong>
                  <div style="margin-top: 10px; padding: 15px; background: white; border-radius: 4px; text-align: left;">
                    <h2 style="color: #333; margin: 0 0 15px 0; text-align: center;">Welcome to Our Platform!</h2>
                    <p style="color: #666; margin: 0 0 20px 0; line-height: 1.5;">We're excited to have you on board. This is a sample email template that you can customize using the Unlayer editor.</p>
                    <div style="text-align: center;">
                      <button style="background: #007bff; color: white; border: none; padding: 15px 30px; border-radius: 5px; font-size: 18px; font-weight: bold; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.2);">Get Started</button>
                    </div>
                  </div>
                </div>
                
                <p style="color: white; font-style: italic; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">Note: This is a demo mode. In production, the real Unlayer editor would be loaded.</p>
                <p style="color: #28a745; font-weight: bold; background: white; padding: 10px; border-radius: 6px; display: inline-block; box-shadow: 0 2px 4px rgba(0,0,0,0.2);">✅ Design loaded successfully at ${Z}</p>
                <p style="color: white; font-size: 14px; margin-top: 15px; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">🎯 Click the button again to see a new color!</p>
              </div>
              
              <style>
                @keyframes fadeIn {
                  from { opacity: 0; transform: translateY(-20px); }
                  to { opacity: 1; transform: translateY(0); }
                }
              </style>
            `;g.innerHTML=le,console.log("Mock editor: innerHTML set successfully"),console.log("Mock editor: New container HTML after update:",g.innerHTML.substring(0,200)+"...")}else console.error("Container is not a valid HTMLElement:",g)},100)}exportHtml(b){console.log("Mock editor: Exporting HTML"),console.log("Mock editor: Dispatching export-html event"),setTimeout(()=>{const g={html:'<div style="padding: 20px; background: #f8f9fa; border-radius: 8px;"><h2>Mock Email Template</h2><p>This is a mock HTML export from the demo editor.</p></div>',design:this.currentDesign};if(console.log("Mock editor: Export result:",g),b(g),this.options.id&&this.options.id.dispatchEvent){const O=new CustomEvent("export-html",{detail:g,bubbles:!0});this.options.id.dispatchEvent(O),console.log("Mock editor: Custom event dispatched")}},500)}saveDesign(b){console.log("Mock editor: Saving design"),setTimeout(()=>{b(this.currentDesign)},300)}removeEventListener(b,g){console.log(`Mock editor: ${b} event listener removed`)}}}async function k(){if(!(y(u)||y(o)))try{if(D(u,!0),D(f,""),await p(),!s||!window.UnlayerEditor)throw new Error("Container or UnlayerEditor not available");a=new window.UnlayerEditor({id:s,...v,tools:t.tools}),a.addEventListener("design:updated",w=>{i("design-updated",{design:w})}),t.design&&r()&&a.loadDesign(t.design),D(o,!0),D(u,!1),i("loaded",{editor:a})}catch(w){D(u,!1),D(f,w instanceof Error?w.message:"Unknown error",!0),console.error("Failed to initialize Unlayer editor:",w),i("error",{message:y(f)})}}function U(){return new Promise((w,b)=>{if(!a||!y(o)){b(new Error("Editor not loaded"));return}a.exportHtml(g=>{if(g.html){const O={html:g.html,design:g.design};i("export-html",O),w(O)}else b(new Error("Failed to export HTML"))})})}function m(w){a&&y(o)&&a.loadDesign(w)}function Y(){return new Promise((w,b)=>{if(!a||!y(o)){b(new Error("Editor not loaded"));return}a.saveDesign(g=>{w(g)})})}function me(){y(u)||k()}X.onMount(()=>{k()}),X.onDestroy(()=>{a&&(a.removeEventListener("design:updated",()=>{}),a=null)}),Rn(()=>{r()&&y(o)&&a&&t.design&&a.loadDesign(t.design)});var Ce=sr(),ur=Ze(Ce);{var fr=w=>{var b=ir();fe(w,b)},cr=w=>{var b=jt(),g=wt(b);{var O=Z=>{var le=lr(),Ne=mt(Ze(le),4),$e=Ze(Ne),be=mt(Ne,2);yt(()=>$n($e,y(f))),Zn("click",be,me),fe(Z,le)},B=Z=>{var le=jt(),Ne=wt(le);{var $e=be=>{var dr=or();fe(be,dr)};Qe(Ne,be=>{y(o)||be($e)},!0)}fe(Z,le)};Qe(g,Z=>{y(f)?Z(O):Z(B,!1)},!0)}fe(w,b)};Qe(ur,w=>{y(u)?w(fr):w(cr,!1)})}return nr(Ce,w=>s=w,()=>s),yt(()=>tr(Ce,1,`unlayer-editor-container ${l()??""}`,"svelte-ik7c9f")),fe(e,Ce),hn({exportHtml:U,loadDesign:m,saveDesign:Y,retryLoad:me})}Q.UnlayerEditor=ar,Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.umd.cjs.map
